const axios = require('axios');


async function getAccountByName(btag) {
    const serializedBtag = btag.replace('-','#')
    console.log(`https://playoverwatch.com/en-us/search/account-by-name/${serializedBtag}`)
    const searchUser = await axios.get(`https://playoverwatch.com/en-us/search/account-by-name/${serializedBtag}`)

    if (searchUser.data.length == 0) {
        throw 'PLAYER_NOT_EXIST';
    }

    return searchUser.data;
}

module.exports = getAccountByName;
